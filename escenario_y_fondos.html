


<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.4.0">
    
    
      
        <title>Fondo y scroll - Videojuegos para Dispositivos Móviles</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.fe0cca5b.min.css">
      
        <link rel="stylesheet" href="assets/stylesheets/palette.a46bcfb3.min.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fondo-y-scroll" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Cabecera">
    <a href="." title="Videojuegos para Dispositivos Móviles" class="md-header-nav__button md-logo" aria-label="Videojuegos para Dispositivos Móviles">
      
  <img src="imagenes/logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Videojuegos para Dispositivos Móviles
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Fondo y scroll
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Limpiar" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Videojuegos para Dispositivos Móviles" class="md-nav__button md-logo" aria-label="Videojuegos para Dispositivos Móviles">
      
  <img src="imagenes/logo.png" alt="logo">

    </a>
    Videojuegos para Dispositivos Móviles
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="index.html" title="Presentación" class="md-nav__link">
      Presentación
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="videojuegos_para_moviles.html" title="Introducción a los videojuegos móviles" class="md-nav__link">
      Introducción a los videojuegos móviles
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Fundamentos de los motores
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Fundamentos de los motores" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Fundamentos de los motores
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="fundamentos-motores.html" title="Escena y nodos" class="md-nav__link">
      Escena y nodos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="motor_de_fisicas.html" title="Físicas" class="md-nav__link">
      Físicas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="sprites_e_interaccion.html" title="Sprites" class="md-nav__link">
      Sprites
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Fondo y scroll
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="escenario_y_fondos.html" title="Fondo y scroll" class="md-nav__link md-nav__link--active">
      Fondo y scroll
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tilemaps" class="md-nav__link">
    Tilemaps
  </a>
  
    <nav class="md-nav" aria-label="Tilemaps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capas-de-patrones" class="md-nav__link">
    Capas de patrones
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capas-de-objetos" class="md-nav__link">
    Capas de objetos
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scroll-del-escenario" class="md-nav__link">
    Scroll del escenario
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Motores para  móviles
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Motores para  móviles" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Motores para  móviles
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="spritekit.html" title="SpriteKit" class="md-nav__link">
      SpriteKit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="scenekit.html" title="SceneKit" class="md-nav__link">
      SceneKit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="cocos2d-x.html" title="Cocos2d-x" class="md-nav__link">
      Cocos2d-x
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="unity.html" title="Unity" class="md-nav__link">
      Unity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="box2d.html" title="Box2D" class="md-nav__link">
      Box2D
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="mandos.html" title="Controles del videojuego" class="md-nav__link">
      Controles del videojuego
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="adaptacion_a_moviles.html" title="Adaptación a diferentes dispositivos" class="md-nav__link">
      Adaptación a diferentes dispositivos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="redes_sociales.html" title="Logros y marcadores" class="md-nav__link">
      Logros y marcadores
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tilemaps" class="md-nav__link">
    Tilemaps
  </a>
  
    <nav class="md-nav" aria-label="Tilemaps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capas-de-patrones" class="md-nav__link">
    Capas de patrones
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#capas-de-objetos" class="md-nav__link">
    Capas de objetos
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scroll-del-escenario" class="md-nav__link">
    Scroll del escenario
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="fondo-y-scroll">Fondo y <em>scroll</em><a class="headerlink" href="#fondo-y-scroll" title="Permanent link">&para;</a></h1>
<p>Hasta el momento hemos visto cómo crear los diferentes elementos dinámicos (<em>sprites</em>) de nuestro juego, como por ejemplo nuestro personaje, los enemigos, o los disparos. Pero todos estos elementos
normalmente se moverán sobre un escenario. </p>
<p>En los juegos normalmente tendremos un fondo sobre el que se mueven los personajes.  Muchas veces los escenarios del juego son muy extensos y no caben enteros en la pantalla. De esta forma lo que se hace es ver sólo la parte del escenario donde está nuestro personaje,y conforme nos movamos se irá desplazando esta zona visible para enfocar en todo momento el lugar donde está nuestro personaje. Esto es lo que se conoce como <em>scroll</em>. </p>
<p>El tener un fondo con <em>scroll</em> será más costoso computacionalmente,  ya que siempre que nos desplacemos se deberá redibujar toda la pantalla, debido a que se está moviendo todo el fondo. Además para poder dibujar este fondo deberemos tener una imagen con el dibujo del fondo para poder volcarlo en pantalla. Si tenemos un escenario extenso, sería totalmente prohibitivo hacer una imagen que contenga todo el fondo. Esta imagen sobrepasaría con total seguridad el tamaño máximo de las texturas OpenGL.</p>
<p>Para evitar este problema lo que haremos normalmente en este tipo de juegos es construir el fondo como un mosaico (<em>tilemap</em>).</p>
<h2 id="tilemaps"><em>Tilemaps</em><a class="headerlink" href="#tilemaps" title="Permanent link">&para;</a></h2>
<p>Los mapas construidos mediante <em>tilemaps</em> se componen de una serie de piezas que combinaremos formando un mosaico.</p>
<p>Para ello, en primer lugar deberemos crear una imagen con las piezas básicas que vamos a necesitar para nuestro fondo (lo que se conoce como <em>tileset</em>). Esta será una imagen de pequeñas dimensiones, ya que simplemente contiene piezas que posteriormente reutilizaremos. A partir de dichas piezas construiremos el mosaico que será nuestro <em>tilemap</em>.</p>
<p>Mostramos a contionuación como ejemplo el <em>tileset</em> "Desert", creado por <a href="https://opengameart.org/users/beast">MrBeast</a> y obtenido de <a href="https://opengameart.org/content/desert-tileset-0">OpenGameArt.org</a>.</p>
<p><img alt="Tileset &quot;desert&quot;" src="imagenes/juegos/desert_tileset.png" /></p>
<p>Encontramos herramientas que nos permiten hacer esto de forma sencilla, siendo <strong>Tiled</strong> (http://www.mapeditor.org) la más conocida.  Con esta herramienta podremos proporcionar una textura con las distintas piezas con las que construiremos el mosaico (<em>tileset</em>), y combinar estas piezas de forma visual para 
construir nuestros mapas.</p>
<p><img alt="Herramienta Tiled Map Editor" src="imagenes/juegos/herramientas_tiled.jpg" /></p>
<p>En primer lugar debemos proporcionar una imagen con un conjunto de patrones (<em>Mapa &gt; Nuevo conjunto de patrones</em>).</p>
<p>Deberemos indicar el ancho y alto de cada "pieza" (<em>tile</em>), para que así sea capaz de particionar la imagen y obtener de ella los diferentes patrones con los que construir el mapa. Una vez cargados estos patrones, podremos seleccionar cualquiera de ellos
y asignarlo a las diferentes celdas del mapa.</p>
<p><img alt="Patrones para crear el mosaico" src="imagenes/juegos/desert_tiles.png" /></p>
<p>El resultado se guardará en un fichero de tipo <code>.tmx</code>, basado en XML, que la mayor parte de motores 2D son capaces de leer. </p>
<p>Las dimesiones del mapa serán <span><span class="MathJax_Preview">(columnas \cdot ancho) \times (filas \cdot alto)</span><script type="math/tex">(columnas \cdot ancho) \times (filas \cdot alto)</script></span>, siendo <span><span class="MathJax_Preview">ancho \times alto</span><script type="math/tex">ancho \times alto</script></span> las dimensiones de cada <em>tile</em>, y <span><span class="MathJax_Preview">columnas \times filas</span><script type="math/tex">columnas \times filas</script></span> el número de celdas que tiene el mapa. </p>
<p><img alt="Ejemplo de fondo construido con los elementos anteriores" src="imagenes/juegos/desert_tilemap.png" /></p>
<p>Hemos visto la creación básica de un escenario con <em>Tiled Map Editor</em>, pero esta herramienta nos da más facilidades para la creación de los fondos. En el caso anterior hemos visto como crear el fondo a partir de una única capa de mosaico, pero podemos hacer que nuestros fondos se compongan de varias capas. </p>
<p>En el panel de la derecha de la herramienta vemos la lista de capas, y podemos añadir nuevas capas. Al añadir una nueva capa, nos preguntará si queremos una nueva capa de patrones o de objetos. </p>
<ul>
<li>Las <strong>capas de patrones</strong> nos permitirán crear el aspecto visual del fondo mediante un mosaico, como hemos visto anteriormente.</li>
<li>Las <strong>capas de objetos</strong> nos permiten marcar diferentes zonas del mapa, por ejemplo para indicar puntos en los que aparecen enemigos, o el punto en el que se debe situar nuestro personaje al comenzar el nivel, o incluso marcar zonas geométricas que no se visualizarán (por ejemplo para determinar los límites del escenario o para ser utilizados por el motor de físicas).</li>
</ul>
<p>Vamos a ver cada uno de estos tipos de capas con más detenimiento.</p>
<h3 id="capas-de-patrones">Capas de patrones<a class="headerlink" href="#capas-de-patrones" title="Permanent link">&para;</a></h3>
<p>Como hemos indicado anteriormente, las capas de patrones nos permiten definir el aspecto del nivel mediante un mosaico, utilizando un conjunto de patrones para fijar el contenido de cada celda del mosaico.</p>
<p>Cada capa se define como una matriz, en la que en cada posición se indica un número entero que identifica el <em>tile</em> que ocupará dicha celda. Este identificador de cada <em>tile</em> es lo que se conoce como <em>gid</em>. Dentro del <em>tileset</em>, cada <em>tile</em> se identificará por un <em>gid</em> único, empezando a contar desde <code>1</code> (normalmente se asignan de forma secuencial siguiendo el orden en el que están en el conjunto de patrones). De esta forma, cuando en la matriz de la capa tenemos un <code>0</code> como <em>gid</em>, quiere decir que esa celda está <strong>vacía</strong>, mientras que si tiene otro valor, dicho valor representa el identificador del <em>patrón</em> correspondiente.</p>
<p><img alt="GIDs de los tiles" src="imagenes/juegos/desert_gids.png" /></p>
<p>Cuando creamos varias capas de patrones, será importante fijar su orden, ya que las capas que estén al frente taparán a las que estén atrás. Este orden viene determinado por el orden en el que las capas
aparecen en la lista del panel derecho. Las capas al comienzo de la lista quedarán por delante de las demás. Podemos cambiar el orden de las capas en esta lista mediante los botones con las flechas hacia arriba y hacia abajo para conseguir situar cada una de ellas en la profundidad adecuada.</p>
<p><img alt="Capas del escenario" src="imagenes/tiled/tiled_capas.jpg" /></p>
<p>Las utilidades de esta división en capas son varias:</p>
<ul>
<li><strong>Aspecto</strong>: Un primer motivo para utilizar diferentes capas puede ser simplemente por cuestiones de aspecto, para combinar varios elementos en una misma celda. Por ejemplo, en una capa de fondo podríamos poner el cielo, y en una capa más cercana una reja con fondo transparente. De esa forma ese mismo recuadro con la reja podría ser utilizado en otra parte del escenario con un fondo distinto (por ejemplo de montañas), pudiendo así con únicamente 3 recuadros obtener 4 configuraciones diferentes: cielo, montaña, cielo con reja, y montaña con reja.</li>
<li><strong>Colisiones</strong>: Puede interesarnos que los elementos de una capa nos sirvan para detectar colisiones con los objetos del juego. Por ejemplo, podemos en ella definir muros que los personajes del juego
no podrán atravesar. Consideraremos desde nuestro juego que todas las celdas definidas en esa capa suponen regiones que deben colisionar con nuestros <em>sprites</em>.</li>
<li><strong>Consumibles</strong>: Podemos definir una capa con objetos que podamos recoger. Por ejemplo podríamos definir una capa con monedas, de forma que cada vez que el jugador entra en una celda con una moneda
dicha moneda sea eliminada del mapa y se nos añada a un contador de puntuación.</li>
</ul>
<h4>Colisiones con el mapa</h4>
<p>La detección de colisiones con los muros del fondo será muy útil en juegos de tipo RPG o de plataformas. Para hacer esto lo primero que debemos hacer es obtener la capa que define los elementos que se comportan como "muro" tal como hemos visto anteriormente. De esta capa necesitaremos tener alguna forma de identificar qué celdas definen muros. La forma más sencilla sería considerar que todo son muros en dicha capa, de forma que si el <em>gid</em> de una celda es distinto de <code>0</code>, entonces tenemos un muro.</p>
<p>Una forma más elaborada de marcar estas celdas consiste en darles una serie de propiedades que nuestro programa podrá leer y así comprobar si se trata de un muro con el que podemos colisionar o no. Para asignar propiedades a un objeto del conjunto de patrones dentro de <em>Tiled</em>  podemos pulsar con el botón derecho sobre él, y seleccionar <em>Propiedades del Patrón...</em>. Se abrirá un cuadro como el siguiente donde podremos definir dichas propiedades:</p>
<p><img alt="Propiedades de los patrones" src="imagenes/tiled/tiled_propiedades.jpg" /></p>
<p>Lo que deberemos hacer es marcar todos los objetos del conjunto de patrones que sirvan para definir muros con una misma propiedad que los marque como tal.</p>
<p>Cuando entremos en una determinada celda, deberemos desde el código del juego comprobar las propiedades de dicha celda y ver si es colisionable o no.</p>
<p>Para comprobar las colisiones de nuestro <em>sprite</em> con los muros una primera aproximación podría consistir en hacer la comprobación con todas las celdas de la capa. Sin embargo esto no resulta nada eficiente ni adecuado. La solución que se suele utilizar habitualmente consiste en comprobar la colisión únicamente con las
celdas de nuestro entorno. Haremos lo siguiente:</p>
<ul>
<li>Obtendremos la posición en las que está centrado nuestro <em>sprite</em>.</li>
<li>Calcularemos las coordenadas de la celda a la que corresponde (dividiendo entre la anchura y altura de cada celda).</li>
<li>Obtendremos los <em>gid</em> de las 9 celdas adyacentes.</li>
<li>Comprobaremos si colisiona con alguna de ellas, corrigiendo la posición del <em>sprite</em> en tal caso.</li>
</ul>
<h4>Modificación del mapa</h4>
<p>En muchos casos nos interesará tener en el mapa objetos que podamos modificar. Por ejemplo, monedas u otros items que podamos recolectar, u objetos que podemos destruir. Para conseguir esto podemos definir una capa con dichos objetos, y marcarlos con una propiedad que nos indique que son "recolectables" o "destruibles" (o bien considerar que todos en la capa lo son).</p>
<p>Desde el código del juego podremos modificar el <em>gid</em> de cada celda de la capa. Por ejemplo, poniendo el <em>gid</em> a <code>0</code> haremos que una celda de la capa "se borre".</p>
<h3 id="capas-de-objetos">Capas de objetos<a class="headerlink" href="#capas-de-objetos" title="Permanent link">&para;</a></h3>
<p>Hasta el momento hemos visto las capas de patrones, que se construyen como un mosaico de celdas que definirá el aspecto del fondo. Existe otro tipo de capa que podemos incluir en nuestro diseño del fondo que no se limita al mosaico de celdas, sino que nos permite marcar cualquier región del mapa sin ajustarse a la rejilla de celdas. Estas son las capas de objetos. En estas capas podremos por ejemplo marcar zonas de mapas donde aparecen enemigos, o donde se situa automáticamente nuestro personaje al iniciar el nivel.</p>
<p>Cuando añadamos y seleccionemos una capa de objetos, en la barra de herramientas superior se activarán algunos iconos que nos permitirán crear nuevos objetos y seleccionar y cambiar las propiedades de los objetos existentes. Podremos añadir objetos como puntos, regiones rectangulares, o polilíneas.</p>
<p><img alt="Capa de objetos" src="imagenes/tiled/tiled_object.jpg" /></p>
<p>Tras crear un objeto, podremos cambiar a la herramienta para la selección y modificación de objetos, seleccionar el objeto que acabamos de crear, pulsar sobre él con el botón derecho, y seleccionar la opción <em>Propiedades del Objeto ...</em>. Veremos una ventana como la siguiente, en la que podremos darle un nombre, modificar sus dimensiones, y añadir una lista de propiedades.</p>
<p><img alt="Propiedades de los objetos" src="imagenes/tiled/tiled_objectprop.jpg" /></p>
<p>Estos objetos podrán ser leidos desde el código. Por ejemplo, podemos definir una polilínea para indicar al motor de físicas cómo debe crear la geometría estática del suelo del escenario.</p>
<h2 id="scroll-del-escenario"><em>Scroll</em> del escenario<a class="headerlink" href="#scroll-del-escenario" title="Permanent link">&para;</a></h2>
<p>Cuando en el juego tenemos un mapa más extenso que el tamaño de la pantalla, tendremos que implementar <em>scroll</em> para movernos por él. Para hacer <em>scroll</em> podemos desplazar la capa principal del
juego, que contiene tanto el mapa de fondo como los <em>sprites</em> (pero no los elementos del <em>HUD</em>, como son los marcadores de puntuación, número de vidas, etc). </p>
<p>Algunos motores nos permiten utilizar también un nodo <em>cámara</em>, que se encargará de realizar esta función (al mover la cámara, se moverá la región visualizada del escenario). En tal caso, el <em>HUD</em> debe añadirse como hijo a la cámara, para que así siempre esté en pantalla.</p>
<p>Normalmente el <em>scroll</em> deberá seguir la posición de nuestro personaje. Conforme movamos nuestro personaje deberemos centrar el mapa en él.</p>
<p>En juegos 2D podemos crear una ilusión de profundidad creando varias capas de fondo y haciendo que las capas más lejanas se muevan a velocidad más lenta que las más cercanas al hacer <em>scroll</em>. Esto
es lo que se conoce como <strong>scroll parallax</strong>. Algunos motores nos proporcionan facilidades para crear este tipo de <em>scroll</em>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Pie">
        
          <a href="sprites_e_interaccion.html" title="Sprites" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                Sprites
              </div>
            </div>
          </a>
        
        
          <a href="spritekit.html" title="SpriteKit" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Siguiente
                </span>
                SpriteKit
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="assets/javascripts/bundle.b39636ac.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados"}</script>
      
      <script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>